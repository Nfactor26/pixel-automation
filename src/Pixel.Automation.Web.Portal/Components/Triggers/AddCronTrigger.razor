<MudDialog>
    <TitleContent>
        <MudText Typo="Typo.h6">
            Add Cron Trigger
        </MudText>
    </TitleContent>
    <DialogContent>  
        <MudTextField id="txtName" @bind-Value="@model.Name" Label="Name" @onfocus="(() => error = string.Empty)"
                      Variant="Variant.Text" Immediate="true" Style="width:360px"></MudTextField>
        <MudSelect @bind-Value="@model.Handler" Label="Handler" AdornmentColor="Color.Secondary" Class="mt-3">
            @foreach (string handler in templateHandlers.Select(s => s.Name))
            {
                <MudSelectItem Value="@handler">@handler</MudSelectItem>
            }
        </MudSelect>  
        <MudTextField id="txtGroup" @bind-Value="@model.Group" Label="Group" @onfocus="(() => error = string.Empty)"
                      Variant="Variant.Text" Immediate="true" Style="width:360px"></MudTextField>
        <MudTextField id="txtCronExpression" @bind-Value="@model.CronExpression" Label="Cron Expression" @onfocus="(() => error = string.Empty)"
                      Variant="Variant.Text" Immediate="true" Style="width:360px"></MudTextField>
        <MudTextField id="txtParameters" @bind-Value="parameters" Label="Parameters" @onfocus="(() => error = string.Empty)"
                      Variant="Variant.Text" Immediate="true" Style="width:360px" HelperText=", seperated key=value pair"></MudTextField>
        <br />     
        @if (!string.IsNullOrEmpty(error))
        {
            <MudAlert id="errorMessage" Severity="Severity.Error">@error</MudAlert>
        }
    </DialogContent>
    <DialogActions>      
        <MudButton id="btnAddTrigger" OnClick="AddNewTriggerAsync"
                   Disabled="string.IsNullOrEmpty(model.Name) || string.IsNullOrEmpty(model.Handler) 
                   || string.IsNullOrEmpty(model.Group) || string.IsNullOrEmpty(model.CronExpression)"
                   Color="Color.Primary" Variant="Variant.Filled">
            Add
        </MudButton>   
    </DialogActions>
</MudDialog>
